SigninLogs
| where ResultType == 0
| project UserPrincipalName, IPAddress, TimeGenerated
| join kind=leftouter (
    IdentityInfo
    | project UserPrincipalName, Department
  ) on UserPrincipalName
